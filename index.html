<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="description" content="QuickDevKit - Lightning fast JSON formatter, validator and beautifier with comment support. Format, validate and debug JSON instantly with multilingual support.">
    <meta name="keywords" content="json formatter, json validator, json beautifier, online json tool, developer tools, quickdevkit">
    <meta name="google-adsense-account" content="ca-pub-2369255699430177">
    <title>QuickDevKit - JSON Formatter & Validator Tool</title>
    
    <!-- Google AdSense -->
    <script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-2369255699430177"
         crossorigin="anonymous"></script>
    
    <script src="https://cdnjs.cloudflare.com/ajax/libs/codemirror/5.65.16/codemirror.min.js"></script>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/codemirror/5.65.16/codemirror.min.css">
    <script src="https://cdnjs.cloudflare.com/ajax/libs/codemirror/5.65.16/mode/javascript/javascript.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/codemirror/5.65.16/addon/edit/matchbrackets.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/codemirror/5.65.16/addon/edit/closebrackets.min.js"></script>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/codemirror/5.65.16/theme/material-darker.min.css">
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
            background-color: #f9fafb;
            min-height: 100vh;
            transition: all 0.2s ease;
        }

        body.dark {
            background-color: #111827;
            color: #f9fafb;
        }

        .header-banner {
            background: linear-gradient(135deg, #3b82f6, #1d4ed8);
            color: white;
            padding: 1rem;
            text-align: center;
            font-size: 0.875rem;
        }

        .header {
            background: white;
            border-bottom: 1px solid #e5e7eb;
            box-shadow: 0 1px 3px rgba(0,0,0,0.1);
            transition: all 0.2s ease;
        }

        .dark .header {
            background: #1f2937;
            border-bottom: 1px solid #374151;
        }

        .header-content {
            max-width: 1200px;
            margin: 0 auto;
            padding: 1rem;
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        .logo {
            display: flex;
            align-items: center;
            gap: 0.5rem;
            font-size: 1.5rem;
            font-weight: bold;
            color: #1f2937;
        }

        .dark .logo {
            color: #f9fafb;
        }

        .logo-icon {
            width: 2rem;
            height: 2rem;
            background: #3b82f6;
            border-radius: 0.5rem;
            display: flex;
            align-items: center;
            justify-content: center;
            color: white;
            font-weight: bold;
        }

        .nav-tabs {
            display: flex;
            gap: 0.25rem;
            margin-left: 2rem;
        }

        .nav-tab {
            padding: 0.5rem 1rem;
            border-radius: 0.375rem;
            font-size: 0.875rem;
            font-weight: 500;
            transition: all 0.2s ease;
            cursor: pointer;
            border: none;
            background: none;
        }

        .nav-tab.active {
            background: #dbeafe;
            color: #1d4ed8;
        }

        .dark .nav-tab.active {
            background: #1e3a8a;
            color: #93c5fd;
        }

        .nav-tab:not(.active) {
            color: #6b7280;
        }

        .nav-tab:not(.active):hover {
            color: #374151;
        }

        .dark .nav-tab:not(.active) {
            color: #9ca3af;
        }

        .dark .nav-tab:not(.active):hover {
            color: #d1d5db;
        }

        .theme-toggle {
            background: #f3f4f6;
            border: none;
            border-radius: 0.375rem;
            padding: 0.5rem;
            cursor: pointer;
            transition: all 0.2s ease;
            color: #6b7280;
        }

        .theme-toggle:hover {
            background: #e5e7eb;
            color: #374151;
        }

        .dark .theme-toggle {
            background: #374151;
            color: #9ca3af;
        }

        .dark .theme-toggle:hover {
            background: #4b5563;
            color: #d1d5db;
        }

        .language-select {
            background: #f3f4f6;
            border: 1px solid #d1d5db;
            border-radius: 0.375rem;
            padding: 0.5rem;
            font-size: 0.875rem;
            cursor: pointer;
            transition: all 0.2s ease;
            color: #374151;
        }

        .language-select:hover {
            background: #e5e7eb;
            border-color: #9ca3af;
        }

        .language-select:focus {
            outline: none;
            ring: 2px;
            ring-color: #3b82f6;
            border-color: #3b82f6;
        }

        .dark .language-select {
            background: #374151;
            border-color: #4b5563;
            color: #d1d5db;
        }

        .dark .language-select:hover {
            background: #4b5563;
            border-color: #6b7280;
        }

        .dark .language-select:focus {
            border-color: #3b82f6;
        }

        .main-content {
            max-width: 1200px;
            margin: 0 auto;
            padding: 2rem 1rem;
        }

        .editor-container {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 1.5rem;
            margin-bottom: 2rem;
        }

        @media (max-width: 768px) {
            .editor-container {
                grid-template-columns: 1fr;
            }
        }

        .editor-panel {
            background: white;
            border: 1px solid #e5e7eb;
            border-radius: 0.5rem;
            box-shadow: 0 1px 3px rgba(0,0,0,0.1);
            overflow: hidden;
            transition: all 0.2s ease;
        }

        .dark .editor-panel {
            background: #1f2937;
            border: 1px solid #374151;
        }

        .panel-header {
            background: #f9fafb;
            border-bottom: 1px solid #e5e7eb;
            padding: 0.75rem 1rem;
            display: flex;
            justify-content: between;
            align-items: center;
            transition: all 0.2s ease;
        }

        .dark .panel-header {
            background: #374151;
            border-bottom: 1px solid #4b5563;
        }

        .panel-title {
            font-size: 1.125rem;
            font-weight: 600;
            color: #1f2937;
            flex: 1;
        }

        .dark .panel-title {
            color: #f9fafb;
        }

        .panel-actions {
            display: flex;
            gap: 0.5rem;
        }

        .btn {
            background: #f3f4f6;
            border: none;
            border-radius: 0.375rem;
            padding: 0.375rem 0.75rem;
            font-size: 0.875rem;
            cursor: pointer;
            transition: all 0.2s ease;
            display: flex;
            align-items: center;
            gap: 0.25rem;
        }

        .btn:hover {
            background: #e5e7eb;
        }

        .btn:disabled {
            opacity: 0.5;
            cursor: not-allowed;
        }

        .btn-primary {
            background: #3b82f6;
            color: white;
        }

        .btn-primary:hover:not(:disabled) {
            background: #2563eb;
        }

        .dark .btn {
            background: #4b5563;
            color: #d1d5db;
        }

        .dark .btn:hover {
            background: #6b7280;
        }

        .editor-wrapper {
            position: relative;
            height: 400px;
            border: 1px solid #e5e7eb;
            border-radius: 0 0 0.5rem 0.5rem;
            overflow: hidden;
        }

        .dark .editor-wrapper {
            border-color: #374151;
        }

        .CodeMirror {
            height: 400px !important;
            width: 100% !important;
            font-family: 'Monaco', 'Menlo', 'Ubuntu Mono', monospace;
            font-size: 14px;
            line-height: 1.5;
            border-radius: 0 0 0.5rem 0.5rem;
        }

        .CodeMirror-scroll {
            max-height: 400px !important;
            overflow-y: auto !important;
            overflow-x: auto !important;
        }

        .error-line {
            background: rgba(248, 113, 113, 0.2) !important;
            border-left: 4px solid #ef4444 !important;
        }

        .error-line-gutter {
            background: rgba(248, 113, 113, 0.3) !important;
            color: #dc2626 !important;
            font-weight: bold !important;
        }

        .comment-notice {
            padding: 0.5rem 1rem;
            background: #f0f9ff;
            border-bottom: 1px solid #e5e7eb;
            font-size: 0.75rem;
            color: #0369a1;
            transition: all 0.2s ease;
        }

        .dark .comment-notice {
            background: #1e3a8a;
            border-bottom: 1px solid #374151;
            color: #93c5fd;
        }

        .status-panel {
            background: white;
            border: 1px solid #e5e7eb;
            border-radius: 0.5rem;
            padding: 1rem;
            margin-bottom: 2rem;
            transition: all 0.2s ease;
        }

        .dark .status-panel {
            background: #1f2937;
            border: 1px solid #374151;
        }

        .status-success {
            border-color: #10b981;
            background: #ecfdf5;
        }

        .dark .status-success {
            background: #064e3b;
            border-color: #065f46;
        }

        .status-error {
            border-color: #ef4444;
            background: #fef2f2;
        }

        .dark .status-error {
            background: #7f1d1d;
            border-color: #991b1b;
        }

        .status-content {
            display: flex;
            align-items: start;
            gap: 0.75rem;
        }

        .status-icon {
            width: 1.25rem;
            height: 1.25rem;
            margin-top: 0.125rem;
        }

        .status-text {
            flex: 1;
        }

        .status-title {
            font-weight: 600;
            margin-bottom: 0.25rem;
        }

        .status-message {
            font-size: 0.875rem;
            opacity: 0.8;
        }

        .footer {
            background: white;
            border-top: 1px solid #e5e7eb;
            padding: 1.5rem;
            text-align: center;
            margin-top: 3rem;
            transition: all 0.2s ease;
        }

        .dark .footer {
            background: #1f2937;
            border-top: 1px solid #374151;
        }

        .footer-text {
            color: #6b7280;
            font-size: 0.875rem;
            line-height: 1.5;
        }

        .dark .footer-text {
            color: #9ca3af;
        }

        /* Guide and Tutorial Sections */
        .guide-section, .tutorial-section {
            margin: 3rem 0;
            padding: 2rem 0;
        }

        .section-header {
            text-align: center;
            margin-bottom: 3rem;
        }

        .section-title {
            font-size: 2rem;
            font-weight: bold;
            color: #1f2937;
            margin-bottom: 0.5rem;
        }

        .dark .section-title {
            color: #f9fafb;
        }

        .section-subtitle {
            color: #6b7280;
            font-size: 1.125rem;
        }

        .dark .section-subtitle {
            color: #9ca3af;
        }

        /* Guide Cards */
        .guide-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
            gap: 1.5rem;
            margin-bottom: 2rem;
        }

        .guide-card {
            background: white;
            border: 1px solid #e5e7eb;
            border-radius: 0.75rem;
            padding: 1.5rem;
            cursor: pointer;
            transition: all 0.3s ease;
            box-shadow: 0 1px 3px rgba(0,0,0,0.1);
        }

        .guide-card:hover {
            border-color: #3b82f6;
            box-shadow: 0 4px 12px rgba(59, 130, 246, 0.15);
            transform: translateY(-2px);
        }

        .dark .guide-card {
            background: #1f2937;
            border-color: #374151;
        }

        .dark .guide-card:hover {
            border-color: #3b82f6;
        }

        .guide-card-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 0.75rem;
        }

        .guide-card-header h3 {
            font-size: 1.25rem;
            font-weight: 600;
            color: #1f2937;
            margin: 0;
        }

        .dark .guide-card-header h3 {
            color: #f9fafb;
        }

        .expand-icon {
            color: #6b7280;
            font-size: 0.875rem;
            transition: transform 0.3s ease;
        }

        .guide-card.expanded .expand-icon {
            transform: rotate(180deg);
        }

        .guide-card-desc {
            color: #6b7280;
            font-size: 0.875rem;
            line-height: 1.5;
            margin: 0;
        }

        .dark .guide-card-desc {
            color: #9ca3af;
        }

        .guide-content {
            max-height: 0;
            overflow: hidden;
            transition: max-height 0.3s ease;
            margin-top: 1rem;
        }

        .guide-content.show {
            max-height: 1000px;
        }

        .content-example, .mistake-example {
            margin-bottom: 1.5rem;
        }

        .content-example h4, .mistake-example h4 {
            color: #374151;
            font-size: 1rem;
            font-weight: 600;
            margin-bottom: 0.5rem;
        }

        .dark .content-example h4, .dark .mistake-example h4 {
            color: #d1d5db;
        }

        .content-example pre, .mistake-example pre {
            background: #f3f4f6;
            border: 1px solid #e5e7eb;
            border-radius: 0.5rem;
            padding: 1rem;
            overflow-x: auto;
            font-family: 'Monaco', 'Menlo', 'Ubuntu Mono', monospace;
            font-size: 0.875rem;
            line-height: 1.5;
        }

        .dark .content-example pre, .dark .mistake-example pre {
            background: #374151;
            border-color: #4b5563;
            color: #f9fafb;
        }

        .tips-list ul {
            margin: 0;
            padding-left: 1.5rem;
        }

        .tips-list li {
            color: #4b5563;
            margin-bottom: 0.5rem;
            line-height: 1.5;
        }

        .dark .tips-list li {
            color: #d1d5db;
        }

        /* Tutorial Cards */
        .tutorial-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(280px, 1fr));
            gap: 2rem;
        }

        .tutorial-card {
            background: white;
            border: 1px solid #e5e7eb;
            border-radius: 0.75rem;
            padding: 2rem;
            text-align: center;
            transition: all 0.3s ease;
            box-shadow: 0 1px 3px rgba(0,0,0,0.1);
        }

        .tutorial-card:hover {
            border-color: #3b82f6;
            box-shadow: 0 8px 25px rgba(59, 130, 246, 0.15);
            transform: translateY(-4px);
        }

        .dark .tutorial-card {
            background: #1f2937;
            border-color: #374151;
        }

        .tutorial-icon {
            font-size: 2.5rem;
            margin-bottom: 1rem;
        }

        .tutorial-card h3 {
            font-size: 1.25rem;
            font-weight: 600;
            color: #1f2937;
            margin-bottom: 0.75rem;
        }

        .dark .tutorial-card h3 {
            color: #f9fafb;
        }

        .tutorial-card p {
            color: #6b7280;
            font-size: 0.875rem;
            line-height: 1.5;
            margin-bottom: 1.5rem;
        }

        .dark .tutorial-card p {
            color: #9ca3af;
        }

        .tutorial-example pre {
            background: #f3f4f6;
            border: 1px solid #e5e7eb;
            border-radius: 0.5rem;
            padding: 1rem;
            text-align: left;
            font-family: 'Monaco', 'Menlo', 'Ubuntu Mono', monospace;
            font-size: 0.8rem;
            line-height: 1.4;
            overflow-x: auto;
        }

        .dark .tutorial-example pre {
            background: #374151;
            border-color: #4b5563;
            color: #f9fafb;
        }

        .feature-list ul, .shortcuts-list ul {
            text-align: left;
            margin: 0;
            padding-left: 1.5rem;
        }

        .feature-list li, .shortcuts-list li {
            color: #4b5563;
            margin-bottom: 0.5rem;
            line-height: 1.5;
        }

        .dark .feature-list li, .dark .shortcuts-list li {
            color: #d1d5db;
        }

        .shortcuts-list kbd {
            background: #f3f4f6;
            border: 1px solid #d1d5db;
            border-radius: 0.25rem;
            padding: 0.125rem 0.375rem;
            font-family: inherit;
            font-size: 0.75rem;
            font-weight: 600;
        }

        .dark .shortcuts-list kbd {
            background: #374151;
            border-color: #4b5563;
            color: #f9fafb;
        }

        .theme-preview {
            margin-top: 1rem;
        }

        .theme-demo {
            display: flex;
            gap: 0.5rem;
            justify-content: center;
        }

        .theme-sample {
            padding: 0.5rem 1rem;
            border-radius: 0.375rem;
            font-size: 0.75rem;
            font-weight: 500;
        }

        .theme-sample.dark {
            background: #1f2937;
            color: #f9fafb;
            border: 1px solid #374151;
        }

        .theme-sample.light {
            background: #f9fafb;
            color: #1f2937;
            border: 1px solid #e5e7eb;
        }

        /* Responsive Design */
        @media (max-width: 768px) {
            .guide-grid, .tutorial-grid {
                grid-template-columns: 1fr;
            }
            
            .section-title {
                font-size: 1.75rem;
            }
            
            .guide-card, .tutorial-card {
                padding: 1.25rem;
            }
        }

        .copied-badge {
            position: absolute;
            top: 0.5rem;
            right: 0.5rem;
            background: #10b981;
            color: white;
            padding: 0.25rem 0.5rem;
            border-radius: 0.25rem;
            font-size: 0.75rem;
            font-weight: 500;
            transform: translateY(-100%);
            opacity: 0;
            transition: all 0.3s ease;
            pointer-events: none;
        }

        .copied-badge.show {
            transform: translateY(0);
            opacity: 1;
        }
    </style>
</head>
<body>
    <!-- Header -->
    <header class="header">
        <div class="header-content">
            <div style="display: flex; align-items: center;">
                <div class="logo">
                    <div class="logo-icon">⚡</div>
                    <span data-i18n="devTools">QuickDevKit</span>
                </div>
                
                <nav class="nav-tabs">
                    <button class="nav-tab active" onclick="setActiveTab('json')" data-i18n="jsonTool">JSON Tool</button>
                    <button class="nav-tab" disabled data-i18n="markdownSoon">Markdown (Coming Soon)</button>
                    <button class="nav-tab" disabled data-i18n="base64Soon">Base64 (Coming Soon)</button>
                </nav>
            </div>

            <div style="display: flex; align-items: center; gap: 1rem;">
                <button class="theme-toggle" onclick="toggleTheme()" title="테마 변경">
                    <span id="theme-icon">🌙</span>
                </button>
                
                <select class="language-select" id="language-select" onchange="changeLanguage(this.value)">
                    <option value="en">English</option>
                    <option value="ko">한국어</option>
                    <option value="ja">日本語</option>
                    <option value="zh-CN">中文</option>
                </select>
            </div>
        </div>
    </header>

    <!-- Main Content -->
    <main class="main-content">
        <div class="editor-container">
            <!-- Input Panel -->
            <div class="editor-panel">
                <div class="panel-header">
                    <h2 class="panel-title" data-i18n="jsonInput">JSON Input</h2>
                    <div class="panel-actions">
                        <button class="btn" onclick="loadSample()" data-i18n="loadSample">Load Sample</button>
                        <button class="btn" onclick="clearInput()" data-i18n="clear">Clear</button>
                    </div>
                </div>
                <div class="comment-notice" data-i18n="commentNotice">
                    💡 Comments supported: // single line comments and /* multi-line comments */
                </div>
                <div class="editor-wrapper">
                    <div id="input-editor"></div>
                </div>
            </div>

            <!-- Output Panel -->
            <div class="editor-panel">
                <div class="panel-header">
                    <h2 class="panel-title" data-i18n="formattedJson">Formatted JSON</h2>
                    <div class="panel-actions">
                        <button class="btn" onclick="minifyJson()" id="minify-btn" disabled data-i18n="minify">Minify</button>
                        <button class="btn btn-primary" onclick="copyOutput()" id="copy-btn" disabled>
                            <span id="copy-icon">📋</span>
                            <span id="copy-text" data-i18n="copy">Copy</span>
                        </button>
                    </div>
                </div>
                <div class="editor-wrapper" style="position: relative;">
                    <div id="output-editor"></div>
                    <div class="copied-badge" id="copied-badge" data-i18n="copied">Copied!</div>
                </div>
            </div>
        </div>

        <!-- Status Panel -->
        <div class="status-panel" id="status-panel" style="display: none;">
            <div class="status-content">
                <div class="status-icon" id="status-icon"></div>
                <div class="status-text">
                    <div class="status-title" id="status-title"></div>
                    <div class="status-message" id="status-message"></div>
                </div>
            </div>
        </div>

        <!-- JSON Guide Section -->
        <section class="guide-section">
            <div class="section-header">
                <h2 class="section-title" data-i18n="jsonGuideTitle">Complete JSON Mastery Guide</h2>
                <p class="section-subtitle">Master JSON with comprehensive guides and practical examples</p>
            </div>
            
            <div class="guide-grid">
                <div class="guide-card" onclick="toggleGuideContent('basics')">
                    <div class="guide-card-header">
                        <h3 data-i18n="jsonBasicsTitle">JSON Basics</h3>
                        <span class="expand-icon">▼</span>
                    </div>
                    <p class="guide-card-desc" data-i18n="jsonBasicsDesc">Learn JSON fundamentals, syntax, and best practices for proper structure</p>
                    <div class="guide-content" id="basics-content">
                        <div class="content-example">
                            <h4>Basic JSON Structure:</h4>
                            <pre><code>{
  "string": "text value",
  "number": 42,
  "boolean": true,
  "null": null,
  "array": [1, 2, 3],
  "object": {
    "nested": "value"
  }
}</code></pre>
                        </div>
                        <div class="tips-list">
                            <h4>Key Rules:</h4>
                            <ul>
                                <li>Always use double quotes for strings</li>
                                <li>No trailing commas allowed</li>
                                <li>Property names must be strings</li>
                                <li>Values can be: string, number, boolean, null, array, object</li>
                            </ul>
                        </div>
                    </div>
                </div>

                <div class="guide-card" onclick="toggleGuideContent('examples')">
                    <div class="guide-card-header">
                        <h3 data-i18n="examplesTitle">Real-world Examples</h3>
                        <span class="expand-icon">▼</span>
                    </div>
                    <p class="guide-card-desc" data-i18n="examplesDesc">API responses, config files, complex data structures and more practical examples</p>
                    <div class="guide-content" id="examples-content">
                        <div class="content-example">
                            <h4>API Response Example:</h4>
                            <pre><code>{
  "status": "success",
  "data": {
    "users": [
      {
        "id": 1,
        "name": "John Doe",
        "email": "john@example.com",
        "active": true
      }
    ]
  },
  "pagination": {
    "page": 1,
    "total": 100
  }
}</code></pre>
                        </div>
                    </div>
                </div>

                <div class="guide-card" onclick="toggleGuideContent('mistakes')">
                    <div class="guide-card-header">
                        <h3 data-i18n="commonMistakesTitle">Common Mistakes</h3>
                        <span class="expand-icon">▼</span>
                    </div>
                    <p class="guide-card-desc" data-i18n="commonMistakesDesc">Frequent JSON errors developers make and how to avoid them</p>
                    <div class="guide-content" id="mistakes-content">
                        <div class="mistake-example">
                            <h4>❌ Trailing Commas:</h4>
                            <pre><code>{
  "name": "John",
  "age": 30, // ← This comma causes error
}</code></pre>
                            <h4>✅ Correct Version:</h4>
                            <pre><code>{
  "name": "John",
  "age": 30
}</code></pre>
                        </div>
                    </div>
                </div>

                <div class="guide-card" onclick="toggleGuideContent('performance')">
                    <div class="guide-card-header">
                        <h3 data-i18n="performanceTipsTitle">Performance Tips</h3>
                        <span class="expand-icon">▼</span>
                    </div>
                    <p class="guide-card-desc" data-i18n="performanceTipsDesc">Optimize JSON parsing speed and design memory-efficient structures</p>
                    <div class="guide-content" id="performance-content">
                        <div class="tips-list">
                            <h4>Optimization Tips:</h4>
                            <ul>
                                <li>Keep object keys short and consistent</li>
                                <li>Avoid deep nesting (max 3-4 levels)</li>
                                <li>Use arrays for lists, objects for dictionaries</li>
                                <li>Consider data compression for large files</li>
                            </ul>
                        </div>
                    </div>
                </div>
            </div>
        </section>

        <!-- Tutorial Section -->
        <section class="tutorial-section">
            <div class="section-header">
                <h2 class="section-title" data-i18n="tutorialTitle">How to Use QuickDevKit</h2>
                <p class="section-subtitle">Maximize your productivity with these powerful features</p>
            </div>
            
            <div class="tutorial-grid">
                <div class="tutorial-card">
                    <div class="tutorial-icon">💬</div>
                    <h3 data-i18n="commentsFeatureTitle">Comment Support</h3>
                    <p data-i18n="commentsFeatureDesc">Use // single-line and /* multi-line */ comments freely in your JSON</p>
                    <div class="tutorial-example">
                        <pre><code>{
  // User configuration
  "user": {
    "name": "Developer", // Full name
    /* Contact information
       Can span multiple lines */
    "email": "dev@example.com"
  }
}</code></pre>
                    </div>
                </div>

                <div class="tutorial-card">
                    <div class="tutorial-icon">🌍</div>
                    <h3 data-i18n="languageFeatureTitle">Auto Language Detection</h3>
                    <p data-i18n="languageFeatureDesc">Automatically detects optimal language from browser, region, and timezone</p>
                    <div class="feature-list">
                        <ul>
                            <li>Browser language preferences</li>
                            <li>Geographic timezone detection</li>
                            <li>Currency and formatting analysis</li>
                            <li>Intelligent fallback to English</li>
                        </ul>
                    </div>
                </div>

                <div class="tutorial-card">
                    <div class="tutorial-icon">⚡</div>
                    <h3 data-i18n="shortcutsTitle">Useful Shortcuts</h3>
                    <p data-i18n="shortcutsDesc">Tab indentation, Ctrl+A select all, and more efficient editing features</p>
                    <div class="shortcuts-list">
                        <ul>
                            <li><kbd>Tab</kbd> - Auto indentation</li>
                            <li><kbd>Ctrl+A</kbd> - Select all</li>
                            <li><kbd>Ctrl+C</kbd> - Copy text</li>
                            <li><kbd>Ctrl+V</kbd> - Paste text</li>
                        </ul>
                    </div>
                </div>

                <div class="tutorial-card">
                    <div class="tutorial-icon">🎨</div>
                    <h3 data-i18n="darkModeTitle">Dark Mode</h3>
                    <p data-i18n="darkModeDesc">Eye-friendly dark theme optimized for long development sessions</p>
                    <div class="theme-preview">
                        <div class="theme-demo">
                            <div class="theme-sample dark">Dark Theme</div>
                            <div class="theme-sample light">Light Theme</div>
                        </div>
                    </div>
                </div>
            </div>
        </section>
    </main>

    <!-- Footer -->
    <footer class="footer">
        <div class="footer-text">
            <p data-i18n="footerText1">© 2025 Dev Tools. Useful tool collection for developers</p>
            <p style="margin-top: 0.25rem;" data-i18n="footerText2">JSON formatter, validator and more tools</p>
        </div>
    </footer>

    <script>
        // Global variables
        let inputEditor, outputEditor;
        let isDarkMode = false;
        let errorLineWidget = null;
        let currentLanguage = 'en'; // Default to English

        // Language translations
        const translations = {
            ko: {
                // Header
                devTools: 'QuickDevKit',
                jsonTool: 'JSON 도구',
                markdownSoon: '마크다운 (곧 출시)',
                base64Soon: 'Base64 (곧 출시)',
                
                // Panel headers
                jsonInput: 'JSON 입력',
                formattedJson: '포맷된 JSON',
                
                // Buttons
                loadSample: '샘플 로드',
                clear: '지우기',
                minify: '압축',
                copy: '복사',
                copied: '복사됨!',
                
                // Messages
                commentNotice: '💡 주석 지원: // 단일 라인 주석과 /* 멀티 라인 주석 */ 사용 가능',
                validJson: '유효한 JSON입니다!',
                successFormat: '성공적으로 포맷되었습니다. (주석은 출력에서 제거됩니다)',
                syntaxError: 'JSON 문법 오류',
                minifyFailed: '압축 실패',
                invalidJson: '유효하지 않은 JSON입니다.',
                copyFailed: '복사에 실패했습니다.',
                
                // Placeholders
                inputPlaceholder: 'JSON을 입력하세요...',
                outputPlaceholder: '포맷된 JSON이 여기에 표시됩니다...',
                
                // Footer
                footerText1: '© 2025 QuickDevKit. 개발자를 위한 빠른 도구 모음집',
                footerText2: 'JSON 포맷터, 검증기 및 더 많은 도구들',
                
                // Guide sections
                jsonGuideTitle: 'JSON 완전 정복 가이드',
                jsonBasicsTitle: 'JSON 기본 문법',
                jsonBasicsDesc: 'JSON의 기본 구조와 문법을 이해하고 올바른 작성법을 배워보세요',
                examplesTitle: '실전 예제 모음',
                examplesDesc: 'API 응답, 설정 파일, 복잡한 데이터 구조 등 다양한 실전 예제',
                commonMistakesTitle: '자주하는 실수',
                commonMistakesDesc: '개발자들이 자주 범하는 JSON 실수와 해결 방법',
                performanceTipsTitle: '성능 최적화 팁',
                performanceTipsDesc: 'JSON 파싱 속도 향상과 메모리 효율적인 구조 설계법',
                
                tutorialTitle: 'QuickDevKit 활용법',
                commentsFeatureTitle: '💬 주석 지원 사용법',
                commentsFeatureDesc: '// 한줄 주석과 /* 여러줄 주석 */을 자유롭게 사용하세요',
                languageFeatureTitle: '🌍 자동 언어 감지',
                languageFeatureDesc: '브라우저 언어, 지역, 시간대를 분석하여 최적 언어로 자동 설정',
                shortcutsTitle: '⚡ 유용한 단축키',
                shortcutsDesc: 'Tab키 들여쓰기, Ctrl+A 전체선택 등 효율적인 편집 기능',
                darkModeTitle: '🎨 다크모드 활용',
                darkModeDesc: '눈의 피로를 줄이는 다크 테마로 장시간 개발 작업에 최적화'
            },
            
            en: {
                // Header
                devTools: 'QuickDevKit',
                jsonTool: 'JSON Tool',
                markdownSoon: 'Markdown (Coming Soon)',
                base64Soon: 'Base64 (Coming Soon)',
                
                // Panel headers
                jsonInput: 'JSON Input',
                formattedJson: 'Formatted JSON',
                
                // Buttons
                loadSample: 'Load Sample',
                clear: 'Clear',
                minify: 'Minify',
                copy: 'Copy',
                copied: 'Copied!',
                
                // Messages
                commentNotice: '💡 Comments supported: // single line comments and /* multi-line comments */',
                validJson: 'Valid JSON!',
                successFormat: 'Successfully formatted. (Comments are removed from output)',
                syntaxError: 'JSON Syntax Error',
                minifyFailed: 'Minify Failed',
                invalidJson: 'Invalid JSON.',
                copyFailed: 'Failed to copy.',
                
                // Placeholders
                inputPlaceholder: 'Enter JSON here...',
                outputPlaceholder: 'Formatted JSON will be displayed here...',
                
                // Footer
                footerText1: '© 2025 QuickDevKit. Lightning fast tools for developers',
                footerText2: 'JSON formatter, validator and more developer tools',
                
                // Guide sections
                jsonGuideTitle: 'Complete JSON Mastery Guide',
                jsonBasicsTitle: 'JSON Basics',
                jsonBasicsDesc: 'Learn JSON fundamentals, syntax, and best practices for proper structure',
                examplesTitle: 'Real-world Examples',
                examplesDesc: 'API responses, config files, complex data structures and more practical examples',
                commonMistakesTitle: 'Common Mistakes',
                commonMistakesDesc: 'Frequent JSON errors developers make and how to avoid them',
                performanceTipsTitle: 'Performance Tips',
                performanceTipsDesc: 'Optimize JSON parsing speed and design memory-efficient structures',
                
                tutorialTitle: 'How to Use QuickDevKit',
                commentsFeatureTitle: '💬 Comment Support',
                commentsFeatureDesc: 'Use // single-line and /* multi-line */ comments freely in your JSON',
                languageFeatureTitle: '🌍 Auto Language Detection',
                languageFeatureDesc: 'Automatically detects optimal language from browser, region, and timezone',
                shortcutsTitle: '⚡ Useful Shortcuts',
                shortcutsDesc: 'Tab indentation, Ctrl+A select all, and more efficient editing features',
                darkModeTitle: '🎨 Dark Mode',
                darkModeDesc: 'Eye-friendly dark theme optimized for long development sessions'
            },
            
            ja: {
                // Header
                devTools: 'QuickDevKit',
                jsonTool: 'JSONツール',
                markdownSoon: 'Markdown（近日公開）',
                base64Soon: 'Base64（近日公開）',
                
                // Panel headers
                jsonInput: 'JSON入力',
                formattedJson: 'フォーマット済みJSON',
                
                // Buttons
                loadSample: 'サンプル読み込み',
                clear: 'クリア',
                minify: '圧縮',
                copy: 'コピー',
                copied: 'コピー完了！',
                
                // Messages
                commentNotice: '💡 コメント対応: // 単行コメント と /* 複数行コメント */',
                validJson: '有効なJSONです！',
                successFormat: '正常にフォーマットされました。（コメントは出力から削除されます）',
                syntaxError: 'JSON構文エラー',
                minifyFailed: '圧縮失敗',
                invalidJson: '無効なJSONです。',
                copyFailed: 'コピーに失敗しました。',
                
                // Placeholders
                inputPlaceholder: 'JSONを入力してください...',
                outputPlaceholder: 'フォーマット済みJSONがここに表示されます...',
                
                // Footer
                footerText1: '© 2025 QuickDevKit. 開発者のための高速ツール集',
                footerText2: 'JSONフォーマッター、バリデーター、その他の開発者ツール',
                
                // Guide sections
                jsonGuideTitle: 'JSON完全マスターガイド',
                jsonBasicsTitle: 'JSON基礎文法',
                jsonBasicsDesc: 'JSONの基本構造と文法を理解し、正しい書き方を学びましょう',
                examplesTitle: '実戦例集',
                examplesDesc: 'API応答、設定ファイル、複雑なデータ構造など様々な実戦例',
                commonMistakesTitle: 'よくある間違い',
                commonMistakesDesc: '開発者がよく犯すJSONのミスと解決方法',
                performanceTipsTitle: 'パフォーマンス最適化',
                performanceTipsDesc: 'JSONパースの高速化とメモリ効率的な構造設計法',
                
                tutorialTitle: 'QuickDevKit活用法',
                commentsFeatureTitle: '💬 コメント機能',
                commentsFeatureDesc: '// 単行コメントと /* 複数行コメント */ を自由に使用可能',
                languageFeatureTitle: '🌍 自動言語検出',
                languageFeatureDesc: 'ブラウザ言語、地域、タイムゾーンを分析して最適言語に自動設定',
                shortcutsTitle: '⚡ 便利なショートカット',
                shortcutsDesc: 'Tabキーインデント、Ctrl+A全選択など効率的な編集機能',
                darkModeTitle: '🎨 ダークモード',
                darkModeDesc: '目の疲労を軽減するダークテーマで長時間の開発作業に最適化'
            },
            
            'zh-CN': {
                // Header
                devTools: 'QuickDevKit',
                jsonTool: 'JSON工具',
                markdownSoon: 'Markdown（即将推出）',
                base64Soon: 'Base64（即将推出）',
                
                // Panel headers
                jsonInput: 'JSON输入',
                formattedJson: '格式化JSON',
                
                // Buttons
                loadSample: '加载示例',
                clear: '清空',
                minify: '压缩',
                copy: '复制',
                copied: '已复制！',
                
                // Messages
                commentNotice: '💡 支持注释：// 单行注释 和 /* 多行注释 */',
                validJson: '有效的JSON！',
                successFormat: '格式化成功。（注释已从输出中移除）',
                syntaxError: 'JSON语法错误',
                minifyFailed: '压缩失败',
                invalidJson: '无效的JSON。',
                copyFailed: '复制失败。',
                
                // Placeholders
                inputPlaceholder: '请输入JSON...',
                outputPlaceholder: '格式化的JSON将显示在这里...',
                
                // Footer
                footerText1: '© 2025 QuickDevKit. 开发者的快速工具集',
                footerText2: 'JSON格式化器、验证器及更多开发者工具',
                
                // Guide sections
                jsonGuideTitle: 'JSON完全掌握指南',
                jsonBasicsTitle: 'JSON基础语法',
                jsonBasicsDesc: '了解JSON的基本结构和语法，学习正确的编写方法',
                examplesTitle: '实战示例集合',
                examplesDesc: 'API响应、配置文件、复杂数据结构等各种实战示例',
                commonMistakesTitle: '常见错误',
                commonMistakesDesc: '开发者经常犯的JSON错误和解决方法',
                performanceTipsTitle: '性能优化技巧',
                performanceTipsDesc: 'JSON解析速度提升和内存高效结构设计方法',
                
                tutorialTitle: 'QuickDevKit使用方法',
                commentsFeatureTitle: '💬 注释支持',
                commentsFeatureDesc: '可以自由使用 // 单行注释 和 /* 多行注释 */',
                languageFeatureTitle: '🌍 自动语言检测',
                languageFeatureDesc: '分析浏览器语言、地区、时区，自动设置为最优语言',
                shortcutsTitle: '⚡ 实用快捷键',
                shortcutsDesc: 'Tab键缩进、Ctrl+A全选等高效编辑功能',
                darkModeTitle: '🎨 暗色模式',
                darkModeDesc: '减少眼部疲劳的暗色主题，为长时间开发工作优化'
            }
        };

        // Get translation text
        function t(key) {
            return translations[currentLanguage][key] || translations['en'][key] || key;
        }

        // Detect browser language
        function detectBrowserLanguage() {
            // Get browser languages in order of preference
            const browserLanguages = [];
            
            // Add navigator.language
            if (navigator.language) {
                browserLanguages.push(navigator.language);
            }
            
            // Add navigator.languages array
            if (navigator.languages && navigator.languages.length > 0) {
                browserLanguages.push(...navigator.languages);
            }
            
            // Add locale from Intl
            try {
                const locale = Intl.DateTimeFormat().resolvedOptions().locale;
                if (locale) {
                    browserLanguages.push(locale);
                }
            } catch (e) {
                // Intl might not be available
            }
            
            // Add language based on timezone/region detection
            const regionLang = detectLanguageFromRegion();
            if (regionLang) {
                browserLanguages.push(regionLang);
            }
            
            // Supported languages
            const supportedLanguages = Object.keys(translations);
            
            // Try to match languages
            for (const browserLang of browserLanguages) {
                const lang = browserLang.toLowerCase();
                
                // Exact match (e.g., 'ko' -> 'ko')
                if (supportedLanguages.includes(lang)) {
                    return lang;
                }
                
                // Language code match (e.g., 'ko-KR' -> 'ko')
                const langCode = lang.split('-')[0];
                if (supportedLanguages.includes(langCode)) {
                    return langCode;
                }
                
                // Special case for Chinese
                if (lang.includes('zh')) {
                    if (lang.includes('cn') || lang.includes('hans') || lang.includes('sg')) {
                        return 'zh-CN'; // Simplified Chinese
                    }
                    // Default to Simplified Chinese for other Chinese variants
                    return 'zh-CN';
                }
            }
            
            // Default to English if no match found
            return 'en';
        }

        // Detect language from region/timezone
        function detectLanguageFromRegion() {
            try {
                // Get timezone
                const timezone = Intl.DateTimeFormat().resolvedOptions().timeZone;
                
                // Timezone to language mapping
                const timezoneToLanguage = {
                    // Korea
                    'Asia/Seoul': 'ko',
                    
                    // Japan
                    'Asia/Tokyo': 'ja',
                    
                    // China
                    'Asia/Shanghai': 'zh-CN',
                    'Asia/Beijing': 'zh-CN',
                    'Asia/Chongqing': 'zh-CN',
                    'Asia/Harbin': 'zh-CN',
                    'Asia/Kashgar': 'zh-CN',
                    'Asia/Urumqi': 'zh-CN',
                    
                    // Taiwan/Hong Kong (using simplified for now)
                    'Asia/Taipei': 'zh-CN',
                    'Asia/Hong_Kong': 'zh-CN',
                    'Asia/Macau': 'zh-CN',
                    
                    // English speaking countries/regions
                    'America/New_York': 'en',
                    'America/Los_Angeles': 'en',
                    'America/Chicago': 'en',
                    'America/Denver': 'en',
                    'America/Phoenix': 'en',
                    'America/Anchorage': 'en',
                    'Pacific/Honolulu': 'en',
                    'Europe/London': 'en',
                    'Australia/Sydney': 'en',
                    'Australia/Melbourne': 'en',
                    'Australia/Perth': 'en',
                    'Pacific/Auckland': 'en',
                    'America/Toronto': 'en',
                    'America/Vancouver': 'en'
                };
                
                if (timezone && timezoneToLanguage[timezone]) {
                    return timezoneToLanguage[timezone];
                }
                
                // Fallback: analyze timezone string
                if (timezone) {
                    const tz = timezone.toLowerCase();
                    
                    if (tz.includes('asia/seoul')) return 'ko';
                    if (tz.includes('asia/tokyo')) return 'ja';
                    if (tz.includes('asia/shanghai') || tz.includes('asia/beijing')) return 'zh-CN';
                    if (tz.includes('america/') || tz.includes('europe/london') || 
                        tz.includes('australia/') || tz.includes('pacific/auckland')) return 'en';
                }
                
                return null;
            } catch (e) {
                // Could not detect timezone
                return null;
            }
        }

        // Detect language from HTTP headers (using additional methods)
        function detectLanguageFromHeaders() {
            // We can't access HTTP headers directly in browser JavaScript,
            // but we can use other browser APIs that might give us similar info
            
            const detectedLanguages = [];
            
            try {
                // Check if there's any Accept-Language-like info we can infer
                // from various browser APIs
                
                // Currency/number formatting can give us region hints
                const numberFormat = new Intl.NumberFormat();
                const currency = numberFormat.resolvedOptions().currency;
                
                const currencyToLanguage = {
                    'KRW': 'ko',  // Korean Won
                    'JPY': 'ja',  // Japanese Yen
                    'CNY': 'zh-CN', // Chinese Yuan
                    'USD': 'en',  // US Dollar
                    'GBP': 'en',  // British Pound
                    'CAD': 'en',  // Canadian Dollar
                    'AUD': 'en',  // Australian Dollar
                    'NZD': 'en'   // New Zealand Dollar
                };
                
                if (currency && currencyToLanguage[currency]) {
                    detectedLanguages.push(currencyToLanguage[currency]);
                }
                
                // Date formatting patterns can also give hints
                const dateFormat = new Intl.DateTimeFormat();
                const formatOptions = dateFormat.resolvedOptions();
                
                if (formatOptions.calendar === 'japanese') {
                    detectedLanguages.push('ja');
                }
                
                // Check number formatting style
                const testNumber = (12345.67).toLocaleString();
                if (testNumber.includes('，')) { // Chinese comma
                    detectedLanguages.push('zh-CN');
                } else if (testNumber.includes('12,345')) { // English-style formatting
                    detectedLanguages.push('en');
                }
                
            } catch (e) {
                // Could not detect language from formatting
            }
            
            return detectedLanguages;
        }

        // Update UI text based on current language
        function updateUI() {
            document.querySelectorAll('[data-i18n]').forEach(element => {
                const key = element.getAttribute('data-i18n');
                const translation = t(key);
                
                if (element.innerHTML.includes('<br>')) {
                    element.innerHTML = translation;
                } else {
                    element.textContent = translation;
                }
            });

            // Update placeholders
            if (inputEditor) {
                inputEditor.setOption('placeholder', t('inputPlaceholder'));
            }
            if (outputEditor) {
                outputEditor.setOption('placeholder', t('outputPlaceholder'));
            }
        }

        // Change language
        function changeLanguage(lang) {
            currentLanguage = lang;
            updateUI();
            
            // Save language preference (with error handling)
            try {
                localStorage.setItem('preferredLanguage', lang);
            } catch (e) {
                // Could not save language preference
            }
        }

        // Load language preference
        function loadLanguagePreference() {
            try {
                const saved = localStorage.getItem('preferredLanguage');
                if (saved && translations[saved]) {
                    currentLanguage = saved;
                } else {
                    // No saved preference, detect browser language
                    currentLanguage = detectBrowserLanguage();
                }
                document.getElementById('language-select').value = currentLanguage;
            } catch (e) {
                // Could not load language preference, detecting browser language
                currentLanguage = detectBrowserLanguage();
                document.getElementById('language-select').value = currentLanguage;
            }
        }

        // Initialize CodeMirror editors
        function initializeEditors() {
            // Input editor
            inputEditor = CodeMirror(document.getElementById('input-editor'), {
                mode: { name: "javascript", json: true },
                lineNumbers: true,
                matchBrackets: true,
                autoCloseBrackets: true,
                indentUnit: 2,
                tabSize: 2,
                lineWrapping: true,
                viewportMargin: 10,
                scrollbarStyle: "native",
                placeholder: t('inputPlaceholder'),
                theme: 'default'
            });

            // Output editor (read-only)
            outputEditor = CodeMirror(document.getElementById('output-editor'), {
                mode: { name: "javascript", json: true },
                lineNumbers: true,
                matchBrackets: true,
                indentUnit: 2,
                tabSize: 2,
                lineWrapping: true,
                viewportMargin: 10,
                scrollbarStyle: "native",
                readOnly: true,
                placeholder: t('outputPlaceholder'),
                theme: 'default'
            });

            // Input change handler
            inputEditor.on('change', function() {
                processJson();
            });

            // Refresh editors to ensure proper rendering
            setTimeout(() => {
                if (inputEditor && outputEditor) {
                    inputEditor.refresh();
                    outputEditor.refresh();
                    
                    // 윈도우 리사이즈 이벤트 핸들러
                    window.addEventListener('resize', function() {
                        setTimeout(() => {
                            inputEditor.refresh();
                            outputEditor.refresh();
                        }, 100);
                    });
                }
            }, 200);

            // Apply initial theme
            applyEditorTheme();
        }

        // Remove comments from JSON string (JSON5 style)
        function removeJsonComments(jsonString) {
            let result = '';
            let inString = false;
            let inSingleComment = false;
            let inMultiComment = false;
            let stringChar = '';
            let escaped = false;
            
            for (let i = 0; i < jsonString.length; i++) {
                const char = jsonString[i];
                const nextChar = jsonString[i + 1] || '';
                
                // Handle escaped characters
                if (escaped) {
                    if (inString) result += char;
                    escaped = false;
                    continue;
                }
                
                // Handle escape sequences in strings
                if (char === '\\' && inString) {
                    escaped = true;
                    result += char;
                    continue;
                }
                
                // Start of string
                if (!inSingleComment && !inMultiComment && !inString && (char === '"' || char === "'")) {
                    inString = true;
                    stringChar = char;
                    result += char;
                    continue;
                }
                
                // End of string
                if (inString && char === stringChar && !escaped) {
                    inString = false;
                    stringChar = '';
                    result += char;
                    continue;
                }
                
                // Skip comment detection inside strings
                if (inString) {
                    result += char;
                    continue;
                }
                
                // Start of single line comment
                if (!inMultiComment && char === '/' && nextChar === '/') {
                    inSingleComment = true;
                    i++; // skip next char
                    continue;
                }
                
                // Start of multi line comment
                if (!inSingleComment && char === '/' && nextChar === '*') {
                    inMultiComment = true;
                    i++; // skip next char
                    continue;
                }
                
                // End of single line comment
                if (inSingleComment && (char === '\n' || char === '\r')) {
                    inSingleComment = false;
                    result += char; // preserve line breaks
                    continue;
                }
                
                // End of multi line comment
                if (inMultiComment && char === '*' && nextChar === '/') {
                    inMultiComment = false;
                    i++; // skip next char
                    continue;
                }
                
                // Add character if not in comment
                if (!inSingleComment && !inMultiComment) {
                    result += char;
                }
            }
            
            return result;
        }

        // Process JSON input
        function processJson() {
            const input = inputEditor.getValue().trim();
            
            // Clear previous error highlights
            clearErrorHighlight();
            
            if (!input) {
                outputEditor.setValue('');
                hideStatus();
                updateButtonStates(false);
                return;
            }

            try {
                // Remove comments before parsing
                const cleanJson = removeJsonComments(input);
                const parsed = JSON.parse(cleanJson);
                const formatted = JSON.stringify(parsed, null, 2);
                outputEditor.setValue(formatted);
                showStatus('success', t('validJson'), t('successFormat'));
                updateButtonStates(true);
            } catch (error) {
                outputEditor.setValue('');
                showStatus('error', t('syntaxError'), error.message);
                updateButtonStates(false);
                
                // Highlight error line
                highlightErrorLine(input, error.message);
            }
        }

        // Clear error highlight
        function clearErrorHighlight() {
            if (inputEditor) {
                inputEditor.eachLine(function(line) {
                    inputEditor.removeLineClass(line, 'background', 'error-line');
                    inputEditor.removeLineClass(line, 'gutter', 'error-line-gutter');
                });
            }
        }

        // Highlight error line
        function highlightErrorLine(input, errorMessage) {
            const match = errorMessage.match(/at position (\d+)/);
            if (match) {
                const position = parseInt(match[1]);
                const beforeError = input.substring(0, position);
                const lineNumber = beforeError.split('\n').length - 1;
                
                if (lineNumber >= 0 && lineNumber < inputEditor.lineCount()) {
                    inputEditor.addLineClass(lineNumber, 'background', 'error-line');
                    inputEditor.addLineClass(lineNumber, 'gutter', 'error-line-gutter');
                }
            }
        }

        // Show status message
        function showStatus(type, title, message) {
            const panel = document.getElementById('status-panel');
            const icon = document.getElementById('status-icon');
            const titleEl = document.getElementById('status-title');
            const messageEl = document.getElementById('status-message');

            panel.className = `status-panel status-${type}`;
            panel.style.display = 'block';
            
            icon.innerHTML = type === 'success' ? '✅' : '❌';
            titleEl.textContent = title;
            messageEl.textContent = message;
        }

        // Hide status panel
        function hideStatus() {
            document.getElementById('status-panel').style.display = 'none';
        }

        // Update button states
        function updateButtonStates(hasValidOutput) {
            document.getElementById('minify-btn').disabled = !hasValidOutput;
            document.getElementById('copy-btn').disabled = !hasValidOutput;
        }

        // Copy output to clipboard
        async function copyOutput() {
            const output = outputEditor.getValue();
            if (!output) return;

            try {
                await navigator.clipboard.writeText(output);
                
                // Show copied badge
                const badge = document.getElementById('copied-badge');
                badge.classList.add('show');
                
                // Update button text
                document.getElementById('copy-icon').textContent = '✅';
                document.getElementById('copy-text').textContent = t('copied');
                
                // Reset after 2 seconds
                setTimeout(() => {
                    badge.classList.remove('show');
                    document.getElementById('copy-icon').textContent = '📋';
                    document.getElementById('copy-text').textContent = t('copy');
                }, 2000);
                
            } catch (err) {
                alert(t('copyFailed'));
            }
        }

        // Minify JSON
        function minifyJson() {
            const output = outputEditor.getValue();
            if (!output) return;

            try {
                // Output is already clean JSON (comments removed), so parse directly
                const parsed = JSON.parse(output);
                const minified = JSON.stringify(parsed);
                outputEditor.setValue(minified);
            } catch (err) {
                showStatus('error', t('minifyFailed'), t('invalidJson'));
            }
        }

        // Load sample JSON
        function loadSample() {
            clearErrorHighlight();
            
            const samples = {
                ko: `{
  // 사용자 기본 정보
  "name": "홍길동",
  "age": 30,
  
  /* 주소 정보 - 다중 라인 주석
     여러 줄에 걸친 설명이 가능합니다 */
  "address": {
    "city": "서울", // 도시명
    "district": "강남구" // 구/군 정보
  },
  
  // 취미 목록 (배열)
  "hobbies": [
    "독서",      // 책 읽기
    "영화감상",   // 영화 보기  
    "코딩"       // 프로그래밍
  ],
  
  "active": true, // 활성 상태
  
  // 메타데이터
  "metadata": {
    "createdAt": "2025-07-15T12:00:00Z",    // 생성일시
    "lastModified": "2025-07-15T12:30:00Z"  // 최종 수정일시
  }
}`,
                en: `{
  // User basic information
  "name": "John Doe",
  "age": 30,
  
  /* Address information - Multi-line comment
     Multi-line descriptions are possible */
  "address": {
    "city": "New York", // City name
    "district": "Manhattan" // District information
  },
  
  // Hobbies list (array)
  "hobbies": [
    "reading",     // Reading books
    "movies",      // Watching movies
    "coding"       // Programming
  ],
  
  "active": true, // Active status
  
  // Metadata
  "metadata": {
    "createdAt": "2025-07-15T12:00:00Z",    // Created datetime
    "lastModified": "2025-07-15T12:30:00Z"  // Last modified datetime
  }
}`,
                ja: `{
  // ユーザー基本情報
  "name": "田中太郎",
  "age": 30,
  
  /* 住所情報 - 複数行コメント
     複数行にわたる説明が可能です */
  "address": {
    "city": "東京", // 都市名
    "district": "渋谷区" // 区/郡情報
  },
  
  // 趣味リスト（配列）
  "hobbies": [
    "読書",        // 本を読む
    "映画鑑賞",    // 映画を見る
    "コーディング"  // プログラミング
  ],
  
  "active": true, // アクティブ状態
  
  // メタデータ
  "metadata": {
    "createdAt": "2025-07-15T12:00:00Z",    // 作成日時
    "lastModified": "2025-07-15T12:30:00Z"  // 最終更新日時
  }
}`,
                'zh-CN': `{
  // 用户基本信息
  "name": "张三",
  "age": 30,
  
  /* 地址信息 - 多行注释
     可以进行多行描述 */
  "address": {
    "city": "北京", // 城市名
    "district": "朝阳区" // 区/县信息
  },
  
  // 爱好列表（数组）
  "hobbies": [
    "阅读",     // 读书
    "看电影",   // 看电影
    "编程"      // 编程
  ],
  
  "active": true, // 活跃状态
  
  // 元数据
  "metadata": {
    "createdAt": "2025-07-15T12:00:00Z",    // 创建时间
    "lastModified": "2025-07-15T12:30:00Z"  // 最后修改时间
  }
}`
            };
            
            const sample = samples[currentLanguage] || samples['en'];
            inputEditor.setValue(sample);
            inputEditor.focus();
        }

        // Clear input
        function clearInput() {
            clearErrorHighlight();
            inputEditor.setValue('');
            inputEditor.focus();
        }

        // Toggle theme
        function toggleTheme() {
            isDarkMode = !isDarkMode;
            document.body.classList.toggle('dark', isDarkMode);
            document.getElementById('theme-icon').textContent = isDarkMode ? '☀️' : '🌙';
            applyEditorTheme();
        }

        // Apply editor theme
        function applyEditorTheme() {
            const theme = isDarkMode ? 'material-darker' : 'default';
            
            if (inputEditor) {
                inputEditor.setOption('theme', theme);
                inputEditor.refresh();
            }
            if (outputEditor) {
                outputEditor.setOption('theme', theme);
                outputEditor.refresh();
            }
        }

        // Set active tab (for future expansion)
        function setActiveTab(tab) {
            // Currently only JSON tab is active
            console.log('Active tab:', tab);
        }

        // Toggle guide content
        function toggleGuideContent(contentId) {
            const content = document.getElementById(contentId + '-content');
            const card = content.closest('.guide-card');
            
            if (content.classList.contains('show')) {
                content.classList.remove('show');
                card.classList.remove('expanded');
            } else {
                // Close all other guide contents first
                document.querySelectorAll('.guide-content.show').forEach(el => {
                    el.classList.remove('show');
                    el.closest('.guide-card').classList.remove('expanded');
                });
                
                // Open current content
                content.classList.add('show');
                card.classList.add('expanded');
            }
        }

        // Initialize the application
        document.addEventListener('DOMContentLoaded', function() {
            // Check if CodeMirror is loaded
            if (typeof CodeMirror === 'undefined') {
                alert('Error loading code editor. Please refresh the page.');
                return;
            }
            
            // Load language preference
            loadLanguagePreference();
            
            // Initialize editors
            initializeEditors();
            
            // Update UI with current language
            updateUI();
            
            // Auto-focus input editor
            setTimeout(() => {
                if (inputEditor) {
                    inputEditor.focus();
                }
            }, 100);
        });
    </script>
</body>
</html>
